!function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e);class i{constructor(t,e){this.object=t,this.publicMethods=e}execute(t,...e){return this.publicMethods.includes(t)?"function"!=typeof this.object[t]?2:(this.object[t](...e),0):1}}class n{constructor(t,e,s){this.ids={backdropMenu:t,frontLayer:e,menuButton:s}}initialize(){this.open=!1,this.backdrop=document.getElementById(this.ids.backdropMenu),this.frontLayer=document.getElementById(this.ids.frontLayer),this.menuButton=document.getElementById(this.ids.menuButton),this.registerEvents()}registerEvents(){this.registerButtonEvent(),this.registerFrontLayerEvent()}registerButtonEvent(){this.menuButton.addEventListener("click",()=>{this.open=!this.open,this.open?this.backdrop.classList.remove("hidden"):this.backdrop.classList.add("hidden"),this.open?this.menuButton.classList.add("open"):this.menuButton.classList.remove("open")})}registerFrontLayerEvent(){this.frontLayer.addEventListener("click",()=>{this.open&&(this.open=!1,this.backdrop.classList.add("hidden"),this.menuButton.classList.remove("open"))})}}class r{constructor(){this.backdrop=new n("menu","front-layer","show-menu"),this.backdrop.initialize()}}class a{constructor(t,e,s){this.name=t,this.content=e,this.html=s}}class o{constructor(t,e,s,i,n){t.addObject(this,"notifications",["show","hide"]),this.iface=t,this.ids={bannerId:e,textP:s,dismissBtn:i,badge:n}}initialize(){this.banner=document.getElementById(this.ids.bannerId),this.bannerText=document.getElementById(this.ids.textP),this.dismissBtn=document.getElementById(this.ids.dismissBtn),this.notificationBadge=document.getElementById(this.ids.badge),this.bannerMsgs=[],this.banner.classList.add("hidden"),this.registerEvents()}registerEvents(){this.registerDismissEvent()}registerDismissEvent(){this.dismissBtn.addEventListener("click",()=>{this.dismissCurrent()})}show(t,e){let s=new a(t,e,!1);this.bannerMsgs.push(s),this.update()}hide(t){this.bannerMsgs=t?this.bannerMsgs.filter(e=>e.name!=t):[],this.update()}dismissCurrent(){this.hide(this.current)}update(){if(0===this.bannerMsgs.length)return void this.banner.classList.add("hidden");const t=this.bannerMsgs[this.bannerMsgs.length-1],e=t.name,s=t.content,i=t.html;this.banner.classList.remove("hidden"),i?this.bannerText.innerHTML=s:this.bannerText.innerText=s,this.current=e,this.updateNotificationBadge()}updateNotificationBadge(){this.bannerMsgs.length<2?this.notificationBadge.classList.add("hidden"):this.bannerMsgs.length>9?(this.notificationBadge.classList.remove("hidden"),this.notificationBadge.textContent="âˆž"):(this.notificationBadge.classList.remove("hidden"),this.notificationBadge.textContent=this.bannerMsgs.length.toString())}}class c{constructor(t,e,s){this.ids={serverListId:e,refreshBtnId:s},t.addObject(this,"serverListing",["flushElements","addElements"]),this.iface=t}initialize(){this.serverListing=document.getElementById(this.ids.serverListId),this.refreshBtn=document.getElementById(this.ids.refreshBtnId),this.registerEvents()}registerEvents(){this.registerRefreshEvent()}registerRefreshEvent(){this.refreshBtn.addEventListener("click",()=>{this.iface.callMethod("networker","getServers")})}flushElements(){this.serverListing.innerHTML=""}addElements(t){for(let e of t.games){const t=e.name,s=e.playerNum,i=e.maxPlayers,n=e.hasPassword;let r=document.createElement("div"),a=document.createElement("span"),o=document.createElement("div"),c=document.createElement("div"),h=document.createElement("span"),l=document.createElement("span"),d=document.createElement("button");r.className="server",a.className="server-name",o.className="right-aligned-items",c.className="lock-icon",h.className="player-count",l.className="player-count-static",d.className="btn join-btn",d.id="join",a.textContent=t,h.textContent=s.toString()+" / "+i.toString(),l.textContent="Spieler online",c.innerHTML=n?'<i class="material-icons">lock</i>':'<i class="material-icons">lock_open</i>',d.textContent="Beitreten",d.addEventListener("click",()=>{this.iface.callMethod("login","showLogin",t)}),o.appendChild(h),o.appendChild(l),o.appendChild(c),o.appendChild(d),r.appendChild(a),r.appendChild(o),this.serverListing.appendChild(r)}}}class h{constructor(t){this.backdrop=new n("menu","front-layer","show-menu"),this.bannerController=new o(t,"notifications","banner-info","dismiss-banner","notification-amount"),this.serverListing=new c(t,"server-list","refresh-button"),this.backdrop.initialize(),this.bannerController.initialize(),this.serverListing.initialize()}}class l{constructor(){this.backdrop=new n("menu","front-layer","show-menu"),this.bannerController=new o(iface,"notifications","banner-info","dismiss-banner","notification-amount"),this.backdrop.initialize(),this.bannerController.initialize()}}let d=new class{constructor(){this.objects={}}addObject(t,e,s){this.objects[e]||(this.objects[e]=[]),this.objects[e].push(new i(t,s))}removeObject(t,e){this.objects[e]&&(objects[e]=objects[e].filter(e=>e.object!=t),0==objects[e].length&&(objects[e]=void 0))}callMethod(t,e,...s){if(!this.objects[t])return 1;let i=0;for(let n of this.objects[t])0!=n.execute(e,...s)&&(i=2);return i}};new class{constructor(t){this.currentUI=null,t.addObject(this,"uiMananger",["initAbout","initLogin","initPlay"]),this.iface=t}initAbout(){this.clearComponents(),this.about=new r(this.iface),this.currentUI="about"}initLogin(){this.clearComponents(),this.login=new h(this.iface),this.currentUI="login"}initPlay(){this.clearComponents(),this.play=new l(this.iface),this.currentUI="play"}clearComponents(){switch(this.currentUI){case null:return;case"about":this.about=null;break;case"login":this.login=null;break;case"play":this.play=null}this.currentUI=null}}(d).initLogin(),new class{constructor(t,e){this.url=e,t.addObject(this,"networker",["getServers"]),this.iface=t,this.refreshing=!1}getServers(){if(this.refreshing)return;this.refreshing=!0;this.iface.callMethod("serverListing","flushElements"),this.iface.callMethod("serverListing","addElements",{games:[{name:"server_1",playerNum:3,maxPlayers:2,hasPassword:!1,type:"ratatosk"},{name:"foo",playerNum:0,maxPlayers:2,hasPassword:!0,type:"ratatosk"},{name:"bar",playerNum:1e6,maxPlayers:2,hasPassword:!0,type:"ratatosk"}]}),this.refreshing=!1}}(d).getServers()}]);